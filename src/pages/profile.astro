---
// src/pages/profile.astro
import Layout from "@/layouts/Layout.astro";
import ProfileView from "@/components/views/ProfileView";
import { isFeatureEnabled } from "@/features/flags";

// Check if profile feature is enabled
if (!isFeatureEnabled("profile")) {
  return Astro.redirect("/");
}

// Check if user is authenticated
// If not, redirect to login page
if (!Astro.locals.user) {
  return Astro.redirect("/login");
}
---

<Layout title="Ustawienia Profilu">
  <ProfileView client:load />
</Layout>
